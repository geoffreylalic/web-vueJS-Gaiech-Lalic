{"remainingRequest":"/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/babel-loader/lib/index.js!/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/src/components/ListeRestaurant.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/src/components/ListeRestaurant.vue","mtime":1634557495354},{"path":"/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/cache-loader/dist/cjs.js","mtime":1634557480460},{"path":"/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/babel-loader/lib/index.js","mtime":1634557480096},{"path":"/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/cache-loader/dist/cjs.js","mtime":1634557480460},{"path":"/Users/geoffreylalic/Documents/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/vue-loader/lib/index.js","mtime":1634557493699}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTGlzdGVSZXN0YXVyYW50IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbm9tOiAiIiwKICAgICAgY3Vpc2luZTogIiIsCiAgICAgIG5iUmVzdGF1cmFudHNUb3RhbDogMCwKICAgICAgcGFnZTogMCwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICBuYnBhZ2V0b3RhbDogMCwKICAgICAgbm9tUmVzdGF1cmFudFJlY2hlcmNoZXI6ICIiLAogICAgICBtc2c6ICIiLAogICAgICByZXN0YXVyYW50czogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBwYWdlUHJlY2VkZW50ZTogZnVuY3Rpb24gcGFnZVByZWNlZGVudGUoKSB7CiAgICAgIGlmICh0aGlzLnBhZ2UgPT09IDApIHJldHVybjtlbHNlIHsKICAgICAgICB0aGlzLnBhZ2UtLTsKICAgICAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogICAgICB9CiAgICB9LAogICAgcGFnZVN1aXZhbnQ6IGZ1bmN0aW9uIHBhZ2VTdWl2YW50KCkgewogICAgICBpZiAodGhpcy5wYWdlID09PSB0aGlzLm5icGFnZXRvdGFsKSByZXR1cm47ZWxzZSB7CiAgICAgICAgdGhpcy5wYWdlKys7CiAgICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICAgICAgfQogICAgfSwKICAgIGdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcjogZnVuY3Rpb24gZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gdXJsIChyZXF1aXJlZCksIG9wdGlvbnMgKG9wdGlvbmFsKQogICAgICB2YXIgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcmVzdGF1cmFudHM/IjsKICAgICAgdXJsICs9ICJwYWdlPSIgKyB0aGlzLnBhZ2U7CiAgICAgIHVybCArPSAiJnBhZ2VzaXplPSIgKyB0aGlzLnBhZ2VTaXplOwogICAgICB1cmwgKz0gIiZuYW1lPSIgKyB0aGlzLm5vbVJlc3RhdXJhbnRSZWNoZXJjaGVyOwogICAgICBmZXRjaCh1cmwsIHsKICAgICAgICBtZXRob2Q6ICJnZXQiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGFycm93IGZ1bmN0aW9ucywgY29uc2VydmUgbGUgYm9uICJ0aGlzIgogICAgICAgIHJlcy5qc29uKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuY291bnQpOwogICAgICAgICAgX3RoaXMucmVzdGF1cmFudHMgPSByZXMuZGF0YTsKICAgICAgICAgIF90aGlzLm5iUmVzdGF1cmFudHNUb3RhbCA9IHJlcy5jb3VudDsKICAgICAgICAgIF90aGlzLm5icGFnZXRvdGFsID0gTWF0aC5yb3VuZChfdGhpcy5uYlJlc3RhdXJhbnRzVG90YWwgLyBfdGhpcy5wYWdlU2l6ZSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBzdXBwcmltZXJSZXN0YXVyYW50OiBmdW5jdGlvbiBzdXBwcmltZXJSZXN0YXVyYW50KHIpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcmVzdGF1cmFudHMvIiArIHIuX2lkOwogICAgICBmZXRjaCh1cmwsIHsKICAgICAgICBtZXRob2Q6ICJERUxFVEUiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlSlNPTikgewogICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyBNYWludGVuYW50IHJlcyBlc3QgdW4gdnJhaSBvYmpldCBKYXZhU2NyaXB0CiAgICAgICAgICBfdGhpczIubXNnID0gcmVzLm1zZzsgLy8gb24gcmFmcmFpY2hpdCBsYSB2dWUKCiAgICAgICAgICBfdGhpczIuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBham91dGVyUmVzdGF1cmFudDogZnVuY3Rpb24gYWpvdXRlclJlc3RhdXJhbnQoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBSw6ljdXDDqXJhdGlvbiBkdSBmb3JtdWxhaXJlLiBQYXMgYmVzb2luIGRlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IKICAgICAgLy8gb3UgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgcHVpc3F1ZSBjJ2VzdCBsZSBmb3JtdWxhaXJlIHF1aSBhIGfDqW7DqXLDqQogICAgICAvLyBsJ8OpdsOpbmVtZW50CgogICAgICB2YXIgZm9ybSA9IGV2ZW50LnRhcmdldDsgLy8gUsOpY3Vww6lyYXRpb24gZGVzIHZhbGV1cnMgZGVzIGNoYW1wcyBkdSBmb3JtdWxhaXJlCiAgICAgIC8vIGVuIHByw6l2aXNpb24gZCd1biBlbnZvaSBtdWx0aXBhcnQgZW4gYWpheC9mZXRjaAoKICAgICAgdmFyIGRvbm5lZXNGb3JtdWxhaXJlID0gbmV3IEZvcm1EYXRhKGZvcm0pOwogICAgICB2YXIgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcmVzdGF1cmFudHMiOwogICAgICBmZXRjaCh1cmwsIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBib2R5OiBkb25uZWVzRm9ybXVsYWlyZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZUpTT04pIHsKICAgICAgICByZXNwb25zZUpTT04uanNvbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy8gTWFpbnRlbmFudCByZXMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdAogICAgICAgICAgX3RoaXMzLm1zZyA9IHJlcy5tc2c7CgogICAgICAgICAgX3RoaXMzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICAgIHRoaXMubm9tID0gIiI7CiAgICAgIHRoaXMuY3Vpc2luZSA9ICIiOwogICAgfSwKICAgIGdldENvbG9yOiBmdW5jdGlvbiBnZXRDb2xvcihpbmRleCkgewogICAgICByZXR1cm4gaW5kZXggJSAyID8gIndoaXRlIiA6ICJMaWdodEdyYXkiOwogICAgfSwKICAgIGNoZXJjaGVyUmVzdGF1cmFudDogZnVuY3Rpb24gY2hlcmNoZXJSZXN0YXVyYW50KCkgewogICAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIGB0aGlzYCBwb2ludHMgdG8gdGhlIHZtIGluc3RhbmNlCiAgICBjb25zb2xlLmxvZygiQVZBTlQgUkVORFUgSFRNTCIpOwogICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICB9Cn07"},{"version":3,"sources":["ListeRestaurant.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <md-table>\n      <md-table-row>\n        <md-table-head>Nom</md-table-head>\n        <md-table-head>Cuisine</md-table-head>\n      </md-table-row>\n\n      <md-table-row\n        v-for=\"(r, index) in restaurants\"\n        :key=\"index\"\n        @click=\"supprimerRestaurant(r)\"\n        v-bind:style=\"{ backgroundColor: getColor(index) }\"\n      >\n        <md-table-head>{{ r.name }}</md-table-head>\n        <md-table-head>{{ r.cuisine }}</md-table-head>\n      </md-table-row>\n    </md-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ListeRestaurant\",\n  data: () => ({\n    nom: \"\",\n    cuisine: \"\",\n    nbRestaurantsTotal: 0,\n    page: 0,\n    pageSize: 10,\n    nbpagetotal: 0,\n    nomRestaurantRechercher: \"\",\n    msg: \"\",\n    restaurants: [],\n  }),\n  methods: {\n    pagePrecedente() {\n      if (this.page === 0) return;\n      else {\n        this.page--;\n        this.getRestaurantsFromServer();\n      }\n    },\n    pageSuivant() {\n      if (this.page === this.nbpagetotal) return;\n      else {\n        this.page++;\n        this.getRestaurantsFromServer();\n      }\n    },\n\n    getRestaurantsFromServer() {\n      // url (required), options (optional)\n      let url = \"http://localhost:8080/api/restaurants?\";\n      url += \"page=\" + this.page;\n      url += \"&pagesize=\" + this.pageSize;\n      url += \"&name=\" + this.nomRestaurantRechercher;\n      fetch(url, {\n        method: \"get\",\n      })\n        .then((res) => {\n          // arrow functions, conserve le bon \"this\"\n          res.json().then((res) => {\n            console.log(res.count);\n            this.restaurants = res.data;\n            this.nbRestaurantsTotal = res.count;\n            this.nbpagetotal = Math.round(\n              this.nbRestaurantsTotal / this.pageSize\n            );\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    supprimerRestaurant(r) {\n      let url = \"http://localhost:8080/api/restaurants/\" + r._id;\n      fetch(url, {\n        method: \"DELETE\",\n      })\n        .then((responseJSON) => {\n          responseJSON.json().then((res) => {\n            // Maintenant res est un vrai objet JavaScript\n            this.msg = res.msg;\n            // on rafraichit la vue\n            this.getRestaurantsFromServer();\n          });\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n    },\n\n    ajouterRestaurant(event) {\n      event.preventDefault();\n\n      // Récupération du formulaire. Pas besoin de document.querySelector\n      // ou document.getElementById puisque c'est le formulaire qui a généré\n      // l'événement\n      let form = event.target;\n\n      // Récupération des valeurs des champs du formulaire\n      // en prévision d'un envoi multipart en ajax/fetch\n      let donneesFormulaire = new FormData(form);\n\n      let url = \"http://localhost:8080/api/restaurants\";\n\n      fetch(url, {\n        method: \"POST\",\n        body: donneesFormulaire,\n      })\n        .then((responseJSON) => {\n          responseJSON.json().then((res) => {\n            // Maintenant res est un vrai objet JavaScript\n            this.msg = res.msg;\n            this.getRestaurantsFromServer();\n          });\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n      this.nom = \"\";\n      this.cuisine = \"\";\n    },\n    getColor(index) {\n      return index % 2 ? \"white\" : \"LightGray\";\n    },\n    chercherRestaurant: function () {\n      this.getRestaurantsFromServer();\n    },\n  },\n\n  mounted() {\n    // `this` points to the vm instance\n    console.log(\"AVANT RENDU HTML\");\n    this.getRestaurantsFromServer();\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ntable {\n  border: 1px solid black;\n  width: 100%;\n  border-collapse: collapse;\n}\n\ntd {\n  border: 1px solid black;\n}\n\ntd {\n  padding: 5px;\n}\n\ntr:hover {\n  background-color: rgba(185, 185, 178, 0.486);\n}\ntd:hover {\n  background-color: rgba(185, 185, 178, 0.486);\n}\n\ninput:invalid {\n  background-color: pink;\n}\n\ninput:valid {\n  background-color: lightGreen;\n}\n</style>\n"],"sourceRoot":"src/components"}]}