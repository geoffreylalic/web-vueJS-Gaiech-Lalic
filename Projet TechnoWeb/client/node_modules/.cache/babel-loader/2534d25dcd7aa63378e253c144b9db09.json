{"remainingRequest":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/babel-loader/lib/index.js!/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/src/components/ListeRestaurant.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/src/components/ListeRestaurant.vue","mtime":1632910413800},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSGVsbG9Xb3JsZCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5vbTogIiIsCiAgICAgIGN1aXNpbmU6ICIiLAogICAgICBuYlJlc3RhdXJhbnRzVG90YWw6IDAsCiAgICAgIHBhZ2U6IDAsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgbmJwYWdldG90YWw6IDAsCiAgICAgIG5vbVJlc3RhdXJhbnRSZWNoZXJjaGVyOiAiIiwKICAgICAgbXNnOiAiIiwKICAgICAgcmVzdGF1cmFudHM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcGFnZVByZWNlZGVudGU6IGZ1bmN0aW9uIHBhZ2VQcmVjZWRlbnRlKCkgewogICAgICBpZiAodGhpcy5wYWdlID09PSAwKSByZXR1cm47ZWxzZSB7CiAgICAgICAgdGhpcy5wYWdlLS07CiAgICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICAgICAgfQogICAgfSwKICAgIHBhZ2VTdWl2YW50OiBmdW5jdGlvbiBwYWdlU3VpdmFudCgpIHsKICAgICAgaWYgKHRoaXMucGFnZSA9PT0gdGhpcy5uYnBhZ2V0b3RhbCkgcmV0dXJuO2Vsc2UgewogICAgICAgIHRoaXMucGFnZSsrOwogICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXI6IGZ1bmN0aW9uIGdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIHVybCAocmVxdWlyZWQpLCBvcHRpb25zIChvcHRpb25hbCkKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzPyI7CiAgICAgIHVybCArPSAicGFnZT0iICsgdGhpcy5wYWdlOwogICAgICB1cmwgKz0gIiZwYWdlc2l6ZT0iICsgdGhpcy5wYWdlU2l6ZTsKICAgICAgdXJsICs9ICImbmFtZT0iICsgdGhpcy5ub21SZXN0YXVyYW50UmVjaGVyY2hlcjsKICAgICAgZmV0Y2godXJsLCB7CiAgICAgICAgbWV0aG9kOiAnZ2V0JwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBhcnJvdyBmdW5jdGlvbnMsIGNvbnNlcnZlIGxlIGJvbiAidGhpcyIKICAgICAgICByZXMuanNvbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzLmNvdW50KTsKICAgICAgICAgIF90aGlzLnJlc3RhdXJhbnRzID0gcmVzLmRhdGE7CiAgICAgICAgICBfdGhpcy5uYlJlc3RhdXJhbnRzVG90YWwgPSByZXMuY291bnQ7CiAgICAgICAgICBfdGhpcy5uYnBhZ2V0b3RhbCA9IE1hdGgucm91bmQoX3RoaXMubmJSZXN0YXVyYW50c1RvdGFsIC8gX3RoaXMucGFnZVNpemUpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgc3VwcHJpbWVyUmVzdGF1cmFudDogZnVuY3Rpb24gc3VwcHJpbWVyUmVzdGF1cmFudChyKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzLyIgKyByLl9pZDsKICAgICAgZmV0Y2godXJsLCB7CiAgICAgICAgbWV0aG9kOiAiREVMRVRFIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZUpTT04pIHsKICAgICAgICByZXNwb25zZUpTT04uanNvbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy8gTWFpbnRlbmFudCByZXMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdAogICAgICAgICAgX3RoaXMyLm1zZyA9IHJlcy5tc2c7IC8vIG9uIHJhZnJhaWNoaXQgbGEgdnVlCgogICAgICAgICAgX3RoaXMyLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgYWpvdXRlclJlc3RhdXJhbnQ6IGZ1bmN0aW9uIGFqb3V0ZXJSZXN0YXVyYW50KGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUsOpY3Vww6lyYXRpb24gZHUgZm9ybXVsYWlyZS4gUGFzIGJlc29pbiBkZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yCiAgICAgIC8vIG91IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIHB1aXNxdWUgYydlc3QgbGUgZm9ybXVsYWlyZSBxdWkgYSBnw6luw6lyw6kKICAgICAgLy8gbCfDqXbDqW5lbWVudAoKICAgICAgdmFyIGZvcm0gPSBldmVudC50YXJnZXQ7IC8vIFLDqWN1cMOpcmF0aW9uIGRlcyB2YWxldXJzIGRlcyBjaGFtcHMgZHUgZm9ybXVsYWlyZQogICAgICAvLyBlbiBwcsOpdmlzaW9uIGQndW4gZW52b2kgbXVsdGlwYXJ0IGVuIGFqYXgvZmV0Y2gKCiAgICAgIHZhciBkb25uZWVzRm9ybXVsYWlyZSA9IG5ldyBGb3JtRGF0YShmb3JtKTsKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzIjsKICAgICAgZmV0Y2godXJsLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgYm9keTogZG9ubmVlc0Zvcm11bGFpcmUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2VKU09OKSB7CiAgICAgICAgcmVzcG9uc2VKU09OLmpzb24oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vIE1haW50ZW5hbnQgcmVzIGVzdCB1biB2cmFpIG9iamV0IEphdmFTY3JpcHQKICAgICAgICAgIF90aGlzMy5tc2cgPSByZXMubXNnOwoKICAgICAgICAgIF90aGlzMy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgICB0aGlzLm5vbSA9ICIiOwogICAgICB0aGlzLmN1aXNpbmUgPSAiIjsKICAgIH0sCiAgICBnZXRDb2xvcjogZnVuY3Rpb24gZ2V0Q29sb3IoaW5kZXgpIHsKICAgICAgcmV0dXJuIGluZGV4ICUgMiA/ICd3aGl0ZScgOiAnTGlnaHRHcmF5JzsKICAgIH0KICB9LAogIGNoZXJjaGVyUmVzdGF1cmFudDogXy5kZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogIH0sIDEwMDApLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyBgdGhpc2AgcG9pbnRzIHRvIHRoZSB2bSBpbnN0YW5jZQogICAgY29uc29sZS5sb2coIkFWQU5UIFJFTkRVIEhUTUwiKTsKICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgfQp9Ow=="},{"version":3,"sources":["ListeRestaurant.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <h2>{{ msg }}</h2>\n    <form @submit.prevent=\"ajouterRestaurant($event)\">\n      <label>\n        Nom : <input name=\"nom\" type=\"text\" required v-model=\"nom\" />\n      </label>\n      <label>\n        Cuisine :\n        <input name=\"cuisine\" type=\"text\" required v-model=\"cuisine\" />\n      </label>\n\n      <button>Ajouter</button>\n    </form>\n\n    <h1>Nombre de restaurants : {{ nbRestaurantsTotal }}</h1>\n    <p>\n      chercher par nom :\n      <input\n        @input.prevent=\"chercherRestaurant()\"\n        type=\"text\"\n        v-model=\"nomRestaurantRechercher\"\n      />\n    </p>\n    <p>nb de page total: {{ nbpagetotal }}</p>\n    <button :disabled=\"page === 0\" @click=\"pagePrecedente()\">Précédent</button>\n    <button :disabled=\"page === nbpagetotal\" @click=\"pageSuivant()\">\n      Suivant\n    </button>\n    Page courante: {{ page }}\n    <p>\n      nombre de restaurants par page\n      <input\n        @input=\"getRestaurantsFromServer()\"\n        type=\"range\"\n        min=\"2\"\n        max=\"100\"\n        value=\"10\"\n        v-model=\"pageSize\"\n      />\n      {{ pageSize }}\n    </p>\n    <md-table>\n      <md-table-row>\n        <md-table-head>Nom</md-table-head>\n        <md-table-head>Cuisine</md-table-head>\n      </md-table-row>\n\n        <md-table-row\n          v-for=\"(r, index) in restaurants\"\n          :key=\"index\"\n          @click=\"supprimerRestaurant(r)\"\n          v-bind:style=\"{ backgroundColor: getColor(index) }\"\n         \n        >\n          <md-table-head>{{ r.name }}</md-table-head>\n          <md-table-head>{{ r.cuisine }}</md-table-head>\n        </md-table-row>\n    </md-table>\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\"\nexport default {\n  name: \"HelloWorld\",\n  data: () => ({\n    nom: \"\",\n    cuisine: \"\",\n    nbRestaurantsTotal: 0,\n    page: 0,\n    pageSize: 10,\n    nbpagetotal: 0,\n    nomRestaurantRechercher: \"\",\n    msg: \"\",\n    restaurants: [],\n  }),\n      methods: {\n         pagePrecedente() {\n                if (this.page === 0) return;\n                else {\n                    this.page--;\n                    this.getRestaurantsFromServer();\n                }\n\n            },\n            pageSuivant() {\n                if (this.page === this.nbpagetotal) return;\n                else {\n                    this.page++;\n                    this.getRestaurantsFromServer();\n                }\n\n            },\n           \n             getRestaurantsFromServer() {\n                // url (required), options (optional)\n                let url = \"http://localhost:8080/api/restaurants?\";\n                 url += \"page=\" + this.page;\n                url += \"&pagesize=\" + this.pageSize\n                url += \"&name=\" + this.nomRestaurantRechercher\n                fetch(url, {\n                    method: 'get'\n                }).then( (res) => {// arrow functions, conserve le bon \"this\"\n                    res.json().then((res) => {\n                        console.log(res.count)\n                        this.restaurants = res.data;\n                        this.nbRestaurantsTotal = res.count;\n                        this.nbpagetotal = Math.round(this.nbRestaurantsTotal / this.pageSize);\n                    })\n\n                }).catch( (err)=> {\n                    console.log(err)\n                });\n            },\n             supprimerRestaurant(r) {\n\n                let url = \"http://localhost:8080/api/restaurants/\"+r._id;\n                fetch(url, {\n                    method: \"DELETE\",\n                })\n                    .then((responseJSON) => {\n                        responseJSON.json()\n                            .then((res) => {\n                                // Maintenant res est un vrai objet JavaScript\n                                this.msg = res.msg;\n                                // on rafraichit la vue\n                                this.getRestaurantsFromServer();\n                            });\n                    })\n                    .catch(function (err) {\n                        console.log(err);\n                    });\n            },\n \n\n            ajouterRestaurant(event) {\n\n                event.preventDefault();\n\n                // Récupération du formulaire. Pas besoin de document.querySelector\n                // ou document.getElementById puisque c'est le formulaire qui a généré\n                // l'événement\n                let form = event.target;\n\n                // Récupération des valeurs des champs du formulaire\n                // en prévision d'un envoi multipart en ajax/fetch\n                let donneesFormulaire = new FormData(form);\n\n                let url = \"http://localhost:8080/api/restaurants\";\n\n                fetch(url, {\n                    method: \"POST\",\n                    body: donneesFormulaire\n                })\n                    .then((responseJSON) => {\n                        responseJSON.json()\n                            .then((res) => {\n                                // Maintenant res est un vrai objet JavaScript\n                                this.msg = res.msg;\n                                this.getRestaurantsFromServer();\n                            });\n                    })\n                    .catch(function (err) {\n                        console.log(err);\n                    });\n                this.nom = \"\";\n                this.cuisine = \"\";\n            },\n            getColor(index) {\n                return (index % 2) ? 'white' : 'LightGray';\n            }\n      },\n       chercherRestaurant:  _.debounce(function () { this.getRestaurantsFromServer();  }, 1000),\n      \n         mounted () {\n            // `this` points to the vm instance\n            console.log(\"AVANT RENDU HTML\")\n            this.getRestaurantsFromServer();\n        }\n        \n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ntable {\n  border: 1px solid black;\n  width: 100%;\n  border-collapse: collapse;\n}\n\n\ntd {\n  border: 1px solid black;\n}\n\ntd {\n  padding: 5px;\n}\n\ntr:hover {\n  background-color: rgba(185, 185, 178, 0.486);\n}\ntd:hover {\n  background-color: rgba(185, 185, 178, 0.486);\n}\n\ninput:invalid {\n  background-color: pink;\n}\n\ninput:valid {\n  background-color: lightGreen;\n}\n\n</style>\n"],"sourceRoot":"src/components"}]}