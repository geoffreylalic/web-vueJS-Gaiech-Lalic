{"remainingRequest":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/src/components/ListeRestaurant.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/src/components/ListeRestaurant.vue","mtime":1633428260685},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/cache-loader/dist/cjs.js","mtime":1633427237485},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/babel-loader/lib/index.js","mtime":1633427237444},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/cache-loader/dist/cjs.js","mtime":1633427237485},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/web-vueJS-Gaiech-Lalic/Projet TechnoWeb/client/node_modules/vue-loader/lib/index.js","mtime":1633427238894}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSGVsbG9Xb3JsZCIsCiAgZGF0YTogKCkgPT4gKHsKICAgIG5vbTogIiIsCiAgICBjdWlzaW5lOiAiIiwKICAgIG5iUmVzdGF1cmFudHNUb3RhbDogMCwKICAgIHBhZ2U6IDAsCiAgICBwYWdlU2l6ZTogMTAsCiAgICBuYnBhZ2V0b3RhbDogMCwKICAgIG5vbVJlc3RhdXJhbnRSZWNoZXJjaGVyOiAiIiwKICAgIG1zZzogIiIsCiAgICByZXN0YXVyYW50czogW10sCiAgfSksCiAgbWV0aG9kczogewogICAgcGFnZVByZWNlZGVudGUoKSB7CiAgICAgIGlmICh0aGlzLnBhZ2UgPT09IDApIHJldHVybjsKICAgICAgZWxzZSB7CiAgICAgICAgdGhpcy5wYWdlLS07CiAgICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICAgICAgfQogICAgfSwKICAgIHBhZ2VTdWl2YW50KCkgewogICAgICBpZiAodGhpcy5wYWdlID09PSB0aGlzLm5icGFnZXRvdGFsKSByZXR1cm47CiAgICAgIGVsc2UgewogICAgICAgIHRoaXMucGFnZSsrOwogICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgIH0KICAgIH0sCgogICAgZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCkgewogICAgICAvLyB1cmwgKHJlcXVpcmVkKSwgb3B0aW9ucyAob3B0aW9uYWwpCiAgICAgIGxldCB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cz8iOwogICAgICB1cmwgKz0gInBhZ2U9IiArIHRoaXMucGFnZTsKICAgICAgdXJsICs9ICImcGFnZXNpemU9IiArIHRoaXMucGFnZVNpemU7CiAgICAgIHVybCArPSAiJm5hbWU9IiArIHRoaXMubm9tUmVzdGF1cmFudFJlY2hlcmNoZXI7CiAgICAgIGZldGNoKHVybCwgewogICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgLy8gYXJyb3cgZnVuY3Rpb25zLCBjb25zZXJ2ZSBsZSBib24gInRoaXMiCiAgICAgICAgICByZXMuanNvbigpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuY291bnQpOwogICAgICAgICAgICB0aGlzLnJlc3RhdXJhbnRzID0gcmVzLmRhdGE7CiAgICAgICAgICAgIHRoaXMubmJSZXN0YXVyYW50c1RvdGFsID0gcmVzLmNvdW50OwogICAgICAgICAgICB0aGlzLm5icGFnZXRvdGFsID0gTWF0aC5yb3VuZCgKICAgICAgICAgICAgICB0aGlzLm5iUmVzdGF1cmFudHNUb3RhbCAvIHRoaXMucGFnZVNpemUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogICAgc3VwcHJpbWVyUmVzdGF1cmFudChyKSB7CiAgICAgIGxldCB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cy8iICsgci5faWQ7CiAgICAgIGZldGNoKHVybCwgewogICAgICAgIG1ldGhvZDogIkRFTEVURSIsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlSlNPTikgPT4gewogICAgICAgICAgcmVzcG9uc2VKU09OLmpzb24oKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgLy8gTWFpbnRlbmFudCByZXMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdAogICAgICAgICAgICB0aGlzLm1zZyA9IHJlcy5tc2c7CiAgICAgICAgICAgIC8vIG9uIHJhZnJhaWNoaXQgbGEgdnVlCiAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBham91dGVyUmVzdGF1cmFudChldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgLy8gUsOpY3Vww6lyYXRpb24gZHUgZm9ybXVsYWlyZS4gUGFzIGJlc29pbiBkZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yCiAgICAgIC8vIG91IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIHB1aXNxdWUgYydlc3QgbGUgZm9ybXVsYWlyZSBxdWkgYSBnw6luw6lyw6kKICAgICAgLy8gbCfDqXbDqW5lbWVudAogICAgICBsZXQgZm9ybSA9IGV2ZW50LnRhcmdldDsKCiAgICAgIC8vIFLDqWN1cMOpcmF0aW9uIGRlcyB2YWxldXJzIGRlcyBjaGFtcHMgZHUgZm9ybXVsYWlyZQogICAgICAvLyBlbiBwcsOpdmlzaW9uIGQndW4gZW52b2kgbXVsdGlwYXJ0IGVuIGFqYXgvZmV0Y2gKICAgICAgbGV0IGRvbm5lZXNGb3JtdWxhaXJlID0gbmV3IEZvcm1EYXRhKGZvcm0pOwoKICAgICAgbGV0IHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzIjsKCiAgICAgIGZldGNoKHVybCwgewogICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgIGJvZHk6IGRvbm5lZXNGb3JtdWxhaXJlLAogICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZUpTT04pID0+IHsKICAgICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIC8vIE1haW50ZW5hbnQgcmVzIGVzdCB1biB2cmFpIG9iamV0IEphdmFTY3JpcHQKICAgICAgICAgICAgdGhpcy5tc2cgPSByZXMubXNnOwogICAgICAgICAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgICAgdGhpcy5ub20gPSAiIjsKICAgICAgdGhpcy5jdWlzaW5lID0gIiI7CiAgICB9LAogICAgZ2V0Q29sb3IoaW5kZXgpIHsKICAgICAgcmV0dXJuIGluZGV4ICUgMiA/ICJ3aGl0ZSIgOiAiTGlnaHRHcmF5IjsKICAgIH0sCiAgICBjaGVyY2hlclJlc3RhdXJhbnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICAgIH0sCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIC8vIGB0aGlzYCBwb2ludHMgdG8gdGhlIHZtIGluc3RhbmNlCiAgICBjb25zb2xlLmxvZygiQVZBTlQgUkVORFUgSFRNTCIpOwogICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICB9LAp9Owo="},{"version":3,"sources":["ListeRestaurant.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ListeRestaurant.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h2>{{ msg }}</h2>\n    <form @submit.prevent=\"ajouterRestaurant($event)\">\n      <label>\n        Nom : <input name=\"nom\" type=\"text\" required v-model=\"nom\" />\n      </label>\n      <label>\n        Cuisine :\n        <input name=\"cuisine\" type=\"text\" required v-model=\"cuisine\" />\n      </label>\n\n      <button>Ajouter</button>\n    </form>\n\n    <h1>Nombre de restaurants : {{ nbRestaurantsTotal }}</h1>\n    <p>\n      chercher par nom :\n      <input\n        @change=\"chercherRestaurant()\"\n        type=\"text\"\n        v-model=\"nomRestaurantRechercher\"\n      />\n    </p>\n    <p>nb de page total: {{ nbpagetotal }}</p>\n    <button :disabled=\"page === 0\" @click=\"pagePrecedente()\">Précédent</button>\n    <button :disabled=\"page === nbpagetotal\" @click=\"pageSuivant()\">\n      Suivant\n    </button>\n    Page courante: {{ page }}\n    <p>\n      nombre de restaurants par page\n      <input\n        @input=\"getRestaurantsFromServer()\"\n        type=\"range\"\n        min=\"2\"\n        max=\"100\"\n        value=\"10\"\n        v-model=\"pageSize\"\n      />\n      {{ pageSize }}\n    </p>\n    <md-table>\n      <md-table-row>\n        <md-table-head>Nom</md-table-head>\n        <md-table-head>Cuisine</md-table-head>\n      </md-table-row>\n\n      <md-table-row\n        v-for=\"(r, index) in restaurants\"\n        :key=\"index\"\n        @click=\"supprimerRestaurant(r)\"\n        v-bind:style=\"{ backgroundColor: getColor(index) }\"\n      >\n        <md-table-head>{{ r.name }}</md-table-head>\n        <md-table-head>{{ r.cuisine }}</md-table-head>\n      </md-table-row>\n    </md-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"HelloWorld\",\n  data: () => ({\n    nom: \"\",\n    cuisine: \"\",\n    nbRestaurantsTotal: 0,\n    page: 0,\n    pageSize: 10,\n    nbpagetotal: 0,\n    nomRestaurantRechercher: \"\",\n    msg: \"\",\n    restaurants: [],\n  }),\n  methods: {\n    pagePrecedente() {\n      if (this.page === 0) return;\n      else {\n        this.page--;\n        this.getRestaurantsFromServer();\n      }\n    },\n    pageSuivant() {\n      if (this.page === this.nbpagetotal) return;\n      else {\n        this.page++;\n        this.getRestaurantsFromServer();\n      }\n    },\n\n    getRestaurantsFromServer() {\n      // url (required), options (optional)\n      let url = \"http://localhost:8080/api/restaurants?\";\n      url += \"page=\" + this.page;\n      url += \"&pagesize=\" + this.pageSize;\n      url += \"&name=\" + this.nomRestaurantRechercher;\n      fetch(url, {\n        method: \"get\",\n      })\n        .then((res) => {\n          // arrow functions, conserve le bon \"this\"\n          res.json().then((res) => {\n            console.log(res.count);\n            this.restaurants = res.data;\n            this.nbRestaurantsTotal = res.count;\n            this.nbpagetotal = Math.round(\n              this.nbRestaurantsTotal / this.pageSize\n            );\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    supprimerRestaurant(r) {\n      let url = \"http://localhost:8080/api/restaurants/\" + r._id;\n      fetch(url, {\n        method: \"DELETE\",\n      })\n        .then((responseJSON) => {\n          responseJSON.json().then((res) => {\n            // Maintenant res est un vrai objet JavaScript\n            this.msg = res.msg;\n            // on rafraichit la vue\n            this.getRestaurantsFromServer();\n          });\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n    },\n\n    ajouterRestaurant(event) {\n      event.preventDefault();\n\n      // Récupération du formulaire. Pas besoin de document.querySelector\n      // ou document.getElementById puisque c'est le formulaire qui a généré\n      // l'événement\n      let form = event.target;\n\n      // Récupération des valeurs des champs du formulaire\n      // en prévision d'un envoi multipart en ajax/fetch\n      let donneesFormulaire = new FormData(form);\n\n      let url = \"http://localhost:8080/api/restaurants\";\n\n      fetch(url, {\n        method: \"POST\",\n        body: donneesFormulaire,\n      })\n        .then((responseJSON) => {\n          responseJSON.json().then((res) => {\n            // Maintenant res est un vrai objet JavaScript\n            this.msg = res.msg;\n            this.getRestaurantsFromServer();\n          });\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n      this.nom = \"\";\n      this.cuisine = \"\";\n    },\n    getColor(index) {\n      return index % 2 ? \"white\" : \"LightGray\";\n    },\n    chercherRestaurant: function () {\n      this.getRestaurantsFromServer();\n    },\n  },\n\n  mounted() {\n    // `this` points to the vm instance\n    console.log(\"AVANT RENDU HTML\");\n    this.getRestaurantsFromServer();\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ntable {\n  border: 1px solid black;\n  width: 100%;\n  border-collapse: collapse;\n}\n\ntd {\n  border: 1px solid black;\n}\n\ntd {\n  padding: 5px;\n}\n\ntr:hover {\n  background-color: rgba(185, 185, 178, 0.486);\n}\ntd:hover {\n  background-color: rgba(185, 185, 178, 0.486);\n}\n\ninput:invalid {\n  background-color: pink;\n}\n\ninput:valid {\n  background-color: lightGreen;\n}\n</style>\n"]}]}