{"remainingRequest":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/src/components/ListeRestaurant.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/src/components/ListeRestaurant.vue","mtime":1632910413800},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wajdigaiech/Desktop/M1 MIAGE/TechnosWeb/tp3/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gImxvZGFzaCIKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIZWxsb1dvcmxkIiwKICBkYXRhOiAoKSA9PiAoewogICAgbm9tOiAiIiwKICAgIGN1aXNpbmU6ICIiLAogICAgbmJSZXN0YXVyYW50c1RvdGFsOiAwLAogICAgcGFnZTogMCwKICAgIHBhZ2VTaXplOiAxMCwKICAgIG5icGFnZXRvdGFsOiAwLAogICAgbm9tUmVzdGF1cmFudFJlY2hlcmNoZXI6ICIiLAogICAgbXNnOiAiIiwKICAgIHJlc3RhdXJhbnRzOiBbXSwKICB9KSwKICAgICAgbWV0aG9kczogewogICAgICAgICBwYWdlUHJlY2VkZW50ZSgpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2UgPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZS0tOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9LAogICAgICAgICAgICBwYWdlU3VpdmFudCgpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2UgPT09IHRoaXMubmJwYWdldG90YWwpIHJldHVybjsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSsrOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9LAogICAgICAgICAgIAogICAgICAgICAgICAgZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCkgewogICAgICAgICAgICAgICAgLy8gdXJsIChyZXF1aXJlZCksIG9wdGlvbnMgKG9wdGlvbmFsKQogICAgICAgICAgICAgICAgbGV0IHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzPyI7CiAgICAgICAgICAgICAgICAgdXJsICs9ICJwYWdlPSIgKyB0aGlzLnBhZ2U7CiAgICAgICAgICAgICAgICB1cmwgKz0gIiZwYWdlc2l6ZT0iICsgdGhpcy5wYWdlU2l6ZQogICAgICAgICAgICAgICAgdXJsICs9ICImbmFtZT0iICsgdGhpcy5ub21SZXN0YXVyYW50UmVjaGVyY2hlcgogICAgICAgICAgICAgICAgZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JwogICAgICAgICAgICAgICAgfSkudGhlbiggKHJlcykgPT4gey8vIGFycm93IGZ1bmN0aW9ucywgY29uc2VydmUgbGUgYm9uICJ0aGlzIgogICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5jb3VudCkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0YXVyYW50cyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5iUmVzdGF1cmFudHNUb3RhbCA9IHJlcy5jb3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYnBhZ2V0b3RhbCA9IE1hdGgucm91bmQodGhpcy5uYlJlc3RhdXJhbnRzVG90YWwgLyB0aGlzLnBhZ2VTaXplKTsKICAgICAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgIH0pLmNhdGNoKCAoZXJyKT0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgIHN1cHByaW1lclJlc3RhdXJhbnQocikgewoKICAgICAgICAgICAgICAgIGxldCB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cy8iK3IuX2lkOwogICAgICAgICAgICAgICAgZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiREVMRVRFIiwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlSlNPTikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUpTT04uanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFpbnRlbmFudCByZXMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXNnID0gcmVzLm1zZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiByYWZyYWljaGl0IGxhIHZ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAKCiAgICAgICAgICAgIGFqb3V0ZXJSZXN0YXVyYW50KGV2ZW50KSB7CgogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICAvLyBSw6ljdXDDqXJhdGlvbiBkdSBmb3JtdWxhaXJlLiBQYXMgYmVzb2luIGRlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IKICAgICAgICAgICAgICAgIC8vIG91IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIHB1aXNxdWUgYydlc3QgbGUgZm9ybXVsYWlyZSBxdWkgYSBnw6luw6lyw6kKICAgICAgICAgICAgICAgIC8vIGwnw6l2w6luZW1lbnQKICAgICAgICAgICAgICAgIGxldCBmb3JtID0gZXZlbnQudGFyZ2V0OwoKICAgICAgICAgICAgICAgIC8vIFLDqWN1cMOpcmF0aW9uIGRlcyB2YWxldXJzIGRlcyBjaGFtcHMgZHUgZm9ybXVsYWlyZQogICAgICAgICAgICAgICAgLy8gZW4gcHLDqXZpc2lvbiBkJ3VuIGVudm9pIG11bHRpcGFydCBlbiBhamF4L2ZldGNoCiAgICAgICAgICAgICAgICBsZXQgZG9ubmVlc0Zvcm11bGFpcmUgPSBuZXcgRm9ybURhdGEoZm9ybSk7CgogICAgICAgICAgICAgICAgbGV0IHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzIjsKCiAgICAgICAgICAgICAgICBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICBib2R5OiBkb25uZWVzRm9ybXVsYWlyZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2VKU09OKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWludGVuYW50IHJlcyBlc3QgdW4gdnJhaSBvYmpldCBKYXZhU2NyaXB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tc2cgPSByZXMubXNnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLm5vbSA9ICIiOwogICAgICAgICAgICAgICAgdGhpcy5jdWlzaW5lID0gIiI7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldENvbG9yKGluZGV4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGluZGV4ICUgMikgPyAnd2hpdGUnIDogJ0xpZ2h0R3JheSc7CiAgICAgICAgICAgIH0KICAgICAgfSwKICAgICAgIGNoZXJjaGVyUmVzdGF1cmFudDogIF8uZGVib3VuY2UoZnVuY3Rpb24gKCkgeyB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOyAgfSwgMTAwMCksCiAgICAgIAogICAgICAgICBtb3VudGVkICgpIHsKICAgICAgICAgICAgLy8gYHRoaXNgIHBvaW50cyB0byB0aGUgdm0gaW5zdGFuY2UKICAgICAgICAgICAgY29uc29sZS5sb2coIkFWQU5UIFJFTkRVIEhUTUwiKQogICAgICAgICAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogICAgICAgIH0KICAgICAgICAKfTsK"},{"version":3,"sources":["ListeRestaurant.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"ListeRestaurant.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h2>{{ msg }}</h2>\n    <form @submit.prevent=\"ajouterRestaurant($event)\">\n      <label>\n        Nom : <input name=\"nom\" type=\"text\" required v-model=\"nom\" />\n      </label>\n      <label>\n        Cuisine :\n        <input name=\"cuisine\" type=\"text\" required v-model=\"cuisine\" />\n      </label>\n\n      <button>Ajouter</button>\n    </form>\n\n    <h1>Nombre de restaurants : {{ nbRestaurantsTotal }}</h1>\n    <p>\n      chercher par nom :\n      <input\n        @input.prevent=\"chercherRestaurant()\"\n        type=\"text\"\n        v-model=\"nomRestaurantRechercher\"\n      />\n    </p>\n    <p>nb de page total: {{ nbpagetotal }}</p>\n    <button :disabled=\"page === 0\" @click=\"pagePrecedente()\">Précédent</button>\n    <button :disabled=\"page === nbpagetotal\" @click=\"pageSuivant()\">\n      Suivant\n    </button>\n    Page courante: {{ page }}\n    <p>\n      nombre de restaurants par page\n      <input\n        @input=\"getRestaurantsFromServer()\"\n        type=\"range\"\n        min=\"2\"\n        max=\"100\"\n        value=\"10\"\n        v-model=\"pageSize\"\n      />\n      {{ pageSize }}\n    </p>\n    <md-table>\n      <md-table-row>\n        <md-table-head>Nom</md-table-head>\n        <md-table-head>Cuisine</md-table-head>\n      </md-table-row>\n\n        <md-table-row\n          v-for=\"(r, index) in restaurants\"\n          :key=\"index\"\n          @click=\"supprimerRestaurant(r)\"\n          v-bind:style=\"{ backgroundColor: getColor(index) }\"\n         \n        >\n          <md-table-head>{{ r.name }}</md-table-head>\n          <md-table-head>{{ r.cuisine }}</md-table-head>\n        </md-table-row>\n    </md-table>\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\"\nexport default {\n  name: \"HelloWorld\",\n  data: () => ({\n    nom: \"\",\n    cuisine: \"\",\n    nbRestaurantsTotal: 0,\n    page: 0,\n    pageSize: 10,\n    nbpagetotal: 0,\n    nomRestaurantRechercher: \"\",\n    msg: \"\",\n    restaurants: [],\n  }),\n      methods: {\n         pagePrecedente() {\n                if (this.page === 0) return;\n                else {\n                    this.page--;\n                    this.getRestaurantsFromServer();\n                }\n\n            },\n            pageSuivant() {\n                if (this.page === this.nbpagetotal) return;\n                else {\n                    this.page++;\n                    this.getRestaurantsFromServer();\n                }\n\n            },\n           \n             getRestaurantsFromServer() {\n                // url (required), options (optional)\n                let url = \"http://localhost:8080/api/restaurants?\";\n                 url += \"page=\" + this.page;\n                url += \"&pagesize=\" + this.pageSize\n                url += \"&name=\" + this.nomRestaurantRechercher\n                fetch(url, {\n                    method: 'get'\n                }).then( (res) => {// arrow functions, conserve le bon \"this\"\n                    res.json().then((res) => {\n                        console.log(res.count)\n                        this.restaurants = res.data;\n                        this.nbRestaurantsTotal = res.count;\n                        this.nbpagetotal = Math.round(this.nbRestaurantsTotal / this.pageSize);\n                    })\n\n                }).catch( (err)=> {\n                    console.log(err)\n                });\n            },\n             supprimerRestaurant(r) {\n\n                let url = \"http://localhost:8080/api/restaurants/\"+r._id;\n                fetch(url, {\n                    method: \"DELETE\",\n                })\n                    .then((responseJSON) => {\n                        responseJSON.json()\n                            .then((res) => {\n                                // Maintenant res est un vrai objet JavaScript\n                                this.msg = res.msg;\n                                // on rafraichit la vue\n                                this.getRestaurantsFromServer();\n                            });\n                    })\n                    .catch(function (err) {\n                        console.log(err);\n                    });\n            },\n \n\n            ajouterRestaurant(event) {\n\n                event.preventDefault();\n\n                // Récupération du formulaire. Pas besoin de document.querySelector\n                // ou document.getElementById puisque c'est le formulaire qui a généré\n                // l'événement\n                let form = event.target;\n\n                // Récupération des valeurs des champs du formulaire\n                // en prévision d'un envoi multipart en ajax/fetch\n                let donneesFormulaire = new FormData(form);\n\n                let url = \"http://localhost:8080/api/restaurants\";\n\n                fetch(url, {\n                    method: \"POST\",\n                    body: donneesFormulaire\n                })\n                    .then((responseJSON) => {\n                        responseJSON.json()\n                            .then((res) => {\n                                // Maintenant res est un vrai objet JavaScript\n                                this.msg = res.msg;\n                                this.getRestaurantsFromServer();\n                            });\n                    })\n                    .catch(function (err) {\n                        console.log(err);\n                    });\n                this.nom = \"\";\n                this.cuisine = \"\";\n            },\n            getColor(index) {\n                return (index % 2) ? 'white' : 'LightGray';\n            }\n      },\n       chercherRestaurant:  _.debounce(function () { this.getRestaurantsFromServer();  }, 1000),\n      \n         mounted () {\n            // `this` points to the vm instance\n            console.log(\"AVANT RENDU HTML\")\n            this.getRestaurantsFromServer();\n        }\n        \n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ntable {\n  border: 1px solid black;\n  width: 100%;\n  border-collapse: collapse;\n}\n\n\ntd {\n  border: 1px solid black;\n}\n\ntd {\n  padding: 5px;\n}\n\ntr:hover {\n  background-color: rgba(185, 185, 178, 0.486);\n}\ntd:hover {\n  background-color: rgba(185, 185, 178, 0.486);\n}\n\ninput:invalid {\n  background-color: pink;\n}\n\ninput:valid {\n  background-color: lightGreen;\n}\n\n</style>\n"]}]}